(()=>{"use strict";var e,t={325:(e,t,r)=>{const s=window.wp.element,i=window.wp.components,n=window.wp.i18n,l=window.wp.plugins,a=window.wp.hooks,o=window.wp.compose;var c=r(196),d=r.n(c),u=r(893);!function(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css","top"===t&&r.firstChild?r.insertBefore(s,r.firstChild):r.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}(".rmsc{--rmsc-main: #4285f4;--rmsc-hover: #f1f3f5;--rmsc-selected: #e2e6ea;--rmsc-border: #ccc;--rmsc-gray: #aaa;--rmsc-bg: #fff;--rmsc-p: 10px;--rmsc-radius: 4px;--rmsc-h: 38px}.rmsc *{box-sizing:border-box;transition:all .2s ease}.rmsc .gray{color:var(--rmsc-gray)}.rmsc .dropdown-content{position:absolute;z-index:1;top:100%;width:100%;padding-top:8px}.rmsc .dropdown-content .panel-content{overflow:hidden;border-radius:var(--rmsc-radius);background:var(--rmsc-bg);box-shadow:0 0 0 1px #0000001a,0 4px 11px #0000001a}.rmsc .dropdown-container{position:relative;outline:0;background-color:var(--rmsc-bg);border:1px solid var(--rmsc-border);border-radius:var(--rmsc-radius)}.rmsc .dropdown-container[aria-disabled=true]:focus-within{box-shadow:var(--rmsc-gray) 0 0 0 1px;border-color:var(--rmsc-gray)}.rmsc .dropdown-container:focus-within{box-shadow:var(--rmsc-main) 0 0 0 1px;border-color:var(--rmsc-main)}.rmsc .dropdown-heading{position:relative;padding:0 var(--rmsc-p);display:flex;align-items:center;width:100%;height:var(--rmsc-h);cursor:default;outline:0}.rmsc .dropdown-heading .dropdown-heading-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.rmsc .clear-selected-button{cursor:pointer;background:none;border:0;padding:0;display:flex}.rmsc .options{max-height:260px;overflow-y:auto;margin:0;padding-left:0}.rmsc .options li{list-style:none;margin:0}.rmsc .select-item{box-sizing:border-box;cursor:pointer;display:block;padding:var(--rmsc-p);outline-offset:-1px;outline-color:var(--rmsc-primary)}.rmsc .select-item:hover{background:var(--rmsc-hover)}.rmsc .select-item.selected{background:var(--rmsc-selected)}.rmsc .no-options{padding:var(--rmsc-p);text-align:center;color:var(--rmsc-gray)}.rmsc .search{width:100%;position:relative;border-bottom:1px solid var(--rmsc-border)}.rmsc .search input{background:none;height:var(--rmsc-h);padding:0 var(--rmsc-p);width:100%;outline:0;border:0;font-size:1em}.rmsc .search input:focus{background:var(--rmsc-hover)}.rmsc .search-clear-button{cursor:pointer;position:absolute;top:0;right:0;bottom:0;background:none;border:0;padding:0 calc(var(--rmsc-p) / 2)}.rmsc .search-clear-button [hidden]{display:none}.rmsc .item-renderer{display:flex;align-items:baseline}.rmsc .item-renderer input{margin:0 5px 0 0}.rmsc .item-renderer.disabled{opacity:.5}.rmsc .spinner{animation:rotate 2s linear infinite}.rmsc .spinner .path{stroke:var(--rmsc-border);stroke-width:4px;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}\n");var p={allItemsAreSelected:"All items are selected.",clearSearch:"Clear Search",clearSelected:"Clear Selected",noOptions:"No options",search:"Search",selectAll:"Select All",selectAllFiltered:"Select All (Filtered)",selectSomeItems:"Select...",create:"Create"},m={value:[],hasSelectAll:!0,className:"multi-select",debounceDuration:200,options:[]},b=d().createContext({}),h=({props:e,children:t})=>{let[r,s]=(0,c.useState)(e.options);return(0,c.useEffect)((()=>{s(e.options)}),[e.options]),(0,u.jsx)(b.Provider,{value:{t:t=>{var r;return(null==(r=e.overrideStrings)?void 0:r[t])||p[t]},...m,...e,options:r,setOptions:s},children:t})},f=()=>d().useContext(b),v={when:!0,eventTypes:["keydown"]};function y(e,t,r){let s=(0,c.useMemo)((()=>Array.isArray(e)?e:[e]),[e]),i=Object.assign({},v,r),{when:n,eventTypes:l}=i,a=(0,c.useRef)(t),{target:o}=i;(0,c.useEffect)((()=>{a.current=t}));let d=(0,c.useCallback)((e=>{s.some((t=>e.key===t||e.code===t))&&a.current(e)}),[s]);(0,c.useEffect)((()=>{if(n&&typeof window<"u"){let e=o?o.current:window;return l.forEach((t=>{e&&e.addEventListener(t,d)})),()=>{l.forEach((t=>{e&&e.removeEventListener(t,d)}))}}}),[n,l,s,o,t])}var x={ARROW_DOWN:"ArrowDown",ARROW_UP:"ArrowUp",ENTER:"Enter",ESCAPE:"Escape",SPACE:"Space"},g=()=>(0,u.jsxs)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray",children:[(0,u.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,u.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),w=({checked:e,option:t,onClick:r,disabled:s})=>(0,u.jsxs)("div",{className:"item-renderer "+(s?"disabled":""),children:[(0,u.jsx)("input",{type:"checkbox",onChange:r,checked:e,tabIndex:-1,disabled:s}),(0,u.jsx)("span",{children:t.label})]}),k=({itemRenderer:e=w,option:t,checked:r,tabIndex:s,disabled:i,onSelectionChanged:n,onClick:l})=>{let a=(0,c.useRef)(),o=()=>{i||n(!r)};return y([x.ENTER,x.SPACE],(e=>{o(),e.preventDefault()}),{target:a}),(0,u.jsx)("label",{className:"select-item "+(r?"selected":""),role:"option","aria-selected":r,tabIndex:s,ref:a,children:(0,u.jsx)(e,{option:t,checked:r,onClick:e=>{o(),l(e)},disabled:i})})},E=({options:e,onClick:t,skipIndex:r})=>{let{disabled:s,value:i,onChange:n,ItemRenderer:l}=f();return(0,u.jsx)(u.Fragment,{children:e.map(((e,a)=>{let o=a+r;return(0,u.jsx)("li",{children:(0,u.jsx)(k,{tabIndex:o,option:e,onSelectionChanged:t=>((e,t)=>{s||n(t?[...i,e]:i.filter((t=>t.value!==e.value)))})(e,t),checked:!!i.find((t=>t.value===e.value)),onClick:e=>t(e,o),itemRenderer:l,disabled:e.disabled||s})},(null==e?void 0:e.key)||a)}))})},S=()=>{let{t:e,onChange:t,options:r,setOptions:s,value:i,filterOptions:n,ItemRenderer:l,disabled:a,disableSearch:o,hasSelectAll:d,ClearIcon:p,debounceDuration:m,isCreatable:b,onCreateOption:h}=f(),v=(0,c.useRef)(),w=(0,c.useRef)(),[S,R]=(0,c.useState)(""),[C,j]=(0,c.useState)(r),[N,O]=(0,c.useState)(""),[_,A]=(0,c.useState)(0),I=(0,c.useCallback)(((e,t)=>{let r;return function(...s){clearTimeout(r),r=setTimeout((()=>{e.apply(null,s)}),t)}})((e=>O(e)),m),[]),V=(0,c.useMemo)((()=>{let e=0;return o||(e+=1),d&&(e+=1),e}),[o,d]),P={label:e(S?"selectAllFiltered":"selectAll"),value:""},T=()=>{var e;O(""),R(""),null==(e=null==w?void 0:w.current)||e.focus()},D=e=>A(e);y([x.ARROW_DOWN,x.ARROW_UP],(e=>{switch(e.code){case x.ARROW_UP:W(-1);break;case x.ARROW_DOWN:W(1);break;default:return}e.stopPropagation(),e.preventDefault()}),{target:v});let B=async()=>{let e={label:S,value:S,__isNew__:!0};h&&(e=await h(S)),s([e,...r]),T(),t([...i,e])},W=e=>{let t=_+e;t=Math.max(0,t),t=Math.min(t,r.length+Math.max(V-1,0)),A(t)};(0,c.useEffect)((()=>{var e,t;null==(t=null==(e=null==v?void 0:v.current)?void 0:e.querySelector(`[tabIndex='${_}']`))||t.focus()}),[_]);let[U,M]=(0,c.useMemo)((()=>{let e=C.filter((e=>!e.disabled));return[e.every((e=>-1!==i.findIndex((t=>t.value===e.value)))),0!==e.length]}),[C,i]);(0,c.useEffect)((()=>{(async()=>n?await n(r,N):function(e,t){return t?e.filter((({label:e,value:r})=>null!=e&&null!=r&&e.toLowerCase().includes(t.toLowerCase()))):e}(r,N))().then(j)}),[N,r]);let F=(0,c.useRef)();y([x.ENTER],B,{target:F});let L=b&&S&&!C.some((e=>(null==e?void 0:e.value)===S));return(0,u.jsxs)("div",{className:"select-panel",role:"listbox",ref:v,children:[!o&&(0,u.jsxs)("div",{className:"search",children:[(0,u.jsx)("input",{placeholder:e("search"),type:"text","aria-describedby":e("search"),onChange:e=>{I(e.target.value),R(e.target.value),A(0)},onFocus:()=>{A(0)},value:S,ref:w,tabIndex:0}),(0,u.jsx)("button",{type:"button",className:"search-clear-button",hidden:!S,onClick:T,"aria-label":e("clearSearch"),children:p||(0,u.jsx)(g,{})})]}),(0,u.jsxs)("ul",{className:"options",children:[d&&M&&(0,u.jsx)(k,{tabIndex:1===V?0:1,checked:U,option:P,onSelectionChanged:e=>{let s=(e=>{let t=C.filter((e=>!e.disabled)).map((e=>e.value));if(e){let e=[...i.map((e=>e.value)),...t];return(n?C:r).filter((t=>e.includes(t.value)))}return i.filter((e=>!t.includes(e.value)))})(e);t(s)},onClick:()=>D(1),itemRenderer:l,disabled:a}),C.length?(0,u.jsx)(E,{skipIndex:V,options:C,onClick:(e,t)=>D(t)}):L?(0,u.jsx)("li",{onClick:B,className:"select-item creatable",tabIndex:1,ref:F,children:`${e("create")} "${S}"`}):(0,u.jsx)("li",{className:"no-options",children:e("noOptions")})]})]})},R=({expanded:e})=>(0,u.jsx)("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray",children:(0,u.jsx)("path",{d:e?"M18 15 12 9 6 15":"M6 9L12 15 18 9"})}),C=()=>{let{t:e,value:t,options:r,valueRenderer:s}=f(),i=0===t.length,n=t.length===r.length,l=s&&s(t,r);return i?(0,u.jsx)("span",{className:"gray",children:l||e("selectSomeItems")}):(0,u.jsx)("span",{children:l||(n?e("allItemsAreSelected"):t.map((e=>e.label)).join(", "))})},j=({size:e=24})=>(0,u.jsx)("span",{style:{width:e,marginRight:"0.2rem"},children:(0,u.jsx)("svg",{width:e,height:e,className:"spinner",viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"},children:(0,u.jsx)("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})})}),N=()=>{let{t:e,onMenuToggle:t,ArrowRenderer:r,shouldToggleOnHover:s,isLoading:i,disabled:n,onChange:l,labelledBy:a,value:o,isOpen:d,defaultIsOpen:p,ClearSelectedIcon:m,closeOnChangedValue:b}=f();(0,c.useEffect)((()=>{b&&k(!1)}),[o]);let[h,v]=(0,c.useState)(!0),[w,k]=(0,c.useState)(p),[E,N]=(0,c.useState)(!1),O=r||R,_=(0,c.useRef)();(function(e,t){let r=(0,c.useRef)(!1);(0,c.useEffect)((()=>{r.current?e():r.current=!0}),t)})((()=>{t&&t(w)}),[w]),(0,c.useEffect)((()=>{void 0===p&&"boolean"==typeof d&&(v(!1),k(d))}),[d]),y([x.ENTER,x.ARROW_DOWN,x.SPACE,x.ESCAPE],(e=>{var t;["text","button"].includes(e.target.type)&&[x.SPACE,x.ENTER].includes(e.code)||(h&&(e.code===x.ESCAPE?(k(!1),null==(t=null==_?void 0:_.current)||t.focus()):k(!0)),e.preventDefault())}),{target:_});let A=e=>{h&&s&&k(e)};return(0,u.jsxs)("div",{tabIndex:0,className:"dropdown-container","aria-labelledby":a,"aria-expanded":w,"aria-readonly":!0,"aria-disabled":n,ref:_,onFocus:()=>!E&&N(!0),onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&h&&(N(!1),k(!1))},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:[(0,u.jsxs)("div",{className:"dropdown-heading",onClick:()=>{h&&k(!i&&!n&&!w)},children:[(0,u.jsx)("div",{className:"dropdown-heading-value",children:(0,u.jsx)(C,{})}),i&&(0,u.jsx)(j,{}),o.length>0&&null!==m&&(0,u.jsx)("button",{type:"button",className:"clear-selected-button",onClick:e=>{e.stopPropagation(),l([]),h&&k(!1)},disabled:n,"aria-label":e("clearSelected"),children:m||(0,u.jsx)(g,{})}),(0,u.jsx)(O,{expanded:w})]}),w&&(0,u.jsx)("div",{className:"dropdown-content",children:(0,u.jsx)("div",{className:"panel-content",children:(0,u.jsx)(S,{})})})]})},O=e=>(0,u.jsx)(h,{props:e,children:(0,u.jsx)("div",{className:`rmsc ${e.className||"multi-select"}`,children:(0,u.jsx)(N,{})})});const _=(0,o.withState)({option:[]})((e=>{let{option:t,setState:r,props:i,data:n,labelledBy:l,type:a}=e,o=i.attributes.contentVisibilityRules.specificusers&&i.attributes.contentVisibilityRules.specificusers[a]?i.attributes.contentVisibilityRules.specificusers[a]:t;return(0,s.createElement)("div",{className:"content-visibility-multi-select"},(0,s.createElement)(O,{options:n,value:o,onChange:e=>{r({option:e}),i.setAttributes({contentVisibilityRules:{...i.attributes.contentVisibilityRules,specificusers:{...i.attributes.contentVisibilityRules.specificusers,[a]:e}}})},labelledBy:l,ItemRenderer:e=>{let{checked:t,option:r,onClick:i,disabled:n}=e;return(0,s.createElement)("div",{className:`item-renderer content-visibility-multi-select-item ${n&&"disabled"}`},(0,s.createElement)("input",{type:"checkbox",onChange:i,checked:t,tabIndex:-1,disabled:n}),(0,s.createElement)("span",null,r.icon||""," ",r.label))}}))})),A=(0,o.withInstanceId)((function(e){let{instanceId:t,props:r}=e;const l=function(){const e=[];if(0===BlockVisibilitySpecificUsers.users.length)return[{label:(0,n.__)("No users found.","content-visibility"),value:0,notes:""}];for(const t in BlockVisibilitySpecificUsers.users)e.push({label:BlockVisibilitySpecificUsers.users[t].display_name+"(ID: "+BlockVisibilitySpecificUsers.users[t].ID+")",value:BlockVisibilitySpecificUsers.users[t].ID});return e}(),o="specificusers";let c=function(e,t){if(!e.attributes.contentVisibilityRules)return!1;if(!e.attributes.contentVisibilityRules[t])return!1;let r=!1;return"specificusers"===t&&e.attributes.contentVisibilityRules[t]&&e.attributes.contentVisibilityRules[t][t]&&e.attributes.contentVisibilityRules[t][t].length>=1&&(r=!0),(0,a.applyFilters)("content-visibility-has-rules",r,e,t)}(r,o)?" has-active-rules":"";return(0,s.createElement)(i.PanelBody,{title:(0,n.__)("Specific Users","content-visibility-specific-users"),initialOpen:!1,className:"content-visibility-control-panel content-visibility-specific-users-controls"+c},(0,s.createElement)(i.PanelRow,null,(0,s.createElement)(_,{data:l,labelledBy:"Select Specific Users",props:r,type:o})),r.attributes.contentVisibility&&(0,s.createElement)("p",{className:"specific-users-help-intro content-visibility-help-text"},(0,n.__)("Select one or more users to whom this block will be "+r.attributes.contentVisibility+". If no users are selected, this block will be "+r.attributes.contentVisibility+" to all users.","content-visibility-specific-users")))}));function I(e){let{props:t}={...e},r=t.attributes.contentVisibilityRules.contentVisibilityRulesEnabled,n=t.attributes.hasOwnProperty("contentVisibility");return r&&n?(0,s.createElement)(A,{props:t}):(0,s.createElement)(i.Disabled,null,(0,s.createElement)(A,{props:t}))}(0,l.registerPlugin)("content-visibility-06-specific-users-fill",{render:function(){return(0,s.createElement)(i.Fill,{name:"content-visibility-extra-controls"},(e=>(0,s.createElement)(I,{props:e})))}}),(0,a.addFilter)("contentVisibility.defaultContentVisibilityRules","content-visibility-specific-users/block-visibility-rules",(function(e){return e.specificusers={},e}))},251:(e,t,r)=>{var s=r(196),i=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,a=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var s,n={},c=null,d=null;for(s in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,s)&&!o.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:i,type:e,key:c,ref:d,props:n,_owner:a.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},893:(e,t,r)=>{e.exports=r(251)},196:e=>{e.exports=window.React}},r={};function s(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,s),n.exports}s.m=t,e=[],s.O=(t,r,i,n)=>{if(!r){var l=1/0;for(d=0;d<e.length;d++){for(var[r,i,n]=e[d],a=!0,o=0;o<r.length;o++)(!1&n||l>=n)&&Object.keys(s.O).every((e=>s.O[e](r[o])))?r.splice(o--,1):(a=!1,n<l&&(l=n));if(a){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,i,n]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};s.O.j=t=>0===e[t];var t=(t,r)=>{var i,n,[l,a,o]=r,c=0;if(l.some((t=>0!==e[t]))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(o)var d=o(s)}for(t&&t(r);c<l.length;c++)n=l[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},r=globalThis.webpackChunkcontent_visibility_specific_users=globalThis.webpackChunkcontent_visibility_specific_users||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i=s.O(void 0,[431],(()=>s(325)));i=s.O(i)})();